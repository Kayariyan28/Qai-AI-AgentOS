<div id="digital-horizon" class="fixed inset-0 z-[-1] bg-[#050505] opacity-60"></div>

<script>
    import p5 from 'p5';

    const sketch = (p) => {
        let drops = [];
        const fontSize = 14;
        let columns;

        p.setup = () => {
            const container = document.getElementById('digital-horizon');
            const canvas = p.createCanvas(container.clientWidth, container.clientHeight);
            canvas.parent('digital-horizon');
            
            columns = p.width / fontSize;
            for (let i = 0; i < columns; i++) {
                drops[i] = p.random(-100, p.height); // Start above screen
            }
            p.frameRate(30);
        };

        p.draw = () => {
            p.background(5, 5, 5, 50); // Fade effect
            p.textSize(fontSize);
            p.textFont('monospace');

            for (let i = 0; i < drops.length; i++) {
                // Digital Matrix/Code Rain Effect
                // Randomly choose bright green or dim green
                if (p.random() > 0.95) {
                    p.fill(74, 222, 128); // Bright Tailwind green-400
                } else {
                    p.fill(34, 197, 94); // Darker green-500
                }

                const char = String.fromCharCode(0x30A0 + p.round(p.random(96))); // Katakana
                // or binary: const char = p.round(p.random(1)); 
                
                p.text(char, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > p.height && p.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        };

        p.windowResized = () => {
            const container = document.getElementById('digital-horizon');
             if (container) {
                p.resizeCanvas(container.clientWidth, container.clientHeight);
                columns = p.width / fontSize;
                drops = []; // Reset drops
                for (let i = 0; i < columns; i++) {
                    drops[i] = p.random(-100, p.height);
                }
            }
        };
    };

    new p5(sketch);
</script>
